<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="page2_stylesheet_Cecilia_Versjon3.css">
  <title>Page of lists</title>
</head>

<body>

  <div class="grid-container" id="container">
    <div id="taskPlannerMenu">
      <button id="signOutButton">Sign out</button>
      <button id="deleteUserButton">Delete user</button>
    </div>
    <div id="taskPlannerHeader_page2">
      <p id="headerTitle">MantisClam Taskplanner</p>
    </div>
    <div id="createNewList">
      <input id="titleOfListInput" placeholder="Title of new list..." maxlength="20">
      <button id="addNewListButton">Add new list</button>
      <button onclick="saveChanges()" class="saveButton">Save changes</button>
    </div>

  </div>

</body>

<script src="page2_Lists_Cecilia_Versjon1.js"></script>

<script>

  //sign out------------------------------------------------------------------------------------------------------------
        document.getElementById("signOutButton").onclick = function (evt) {
          
            sessionStorage.clear();

            location.href = "index.html";
        }
        //-------------------------------------------------------------------------------------------------------------

        //Delete user
        document.getElementById("deleteUserButton").onclick = async function (evt) {

        try {
      
        let confirmation = prompt('Confirm action by typing: "DELETE USER"');
        console.log(confirmation);

        if (confirmation === "DELETE USER") {
          
          let body = {
                username: userData.username,
                userid: userData.userid
            }
            let config = {
                method: "POST",
                headers: {
                    "content-type": "application/json",
                    "authorization": credentials
                },
                body: JSON.stringify(body)
            }
            console.log(config);

            fetch("/deleteUser", config).then(resp => {
                console.log(resp.status);
            })
            sessionStorage.clear();
            location.href="index.html"
        }

        } catch (error) {
            console.error(error)
        }
      }

</script>

</html>